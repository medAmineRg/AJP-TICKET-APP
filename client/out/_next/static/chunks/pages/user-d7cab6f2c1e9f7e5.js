(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[235],{3007:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user",function(){return t(2057)}])},9725:function(e,n,t){"use strict";var r=t(5893),a=t(2892),s=t.n(a);n.Z=function(e){var n=e.placeholder,t=e.onClick,a=e.color,i=e.bg,o=e.classN;return(0,r.jsx)("button",{style:{color:a,backgroundColor:i},onClick:t,className:o?s()[o]:s().btn,children:n})}},9501:function(e,n,t){"use strict";var r=t(5893),a=(t(7294),t(9725)),s=t(6591),i=t.n(s);n.Z=function(e){var n=e.open,t=e.children,s=e.onClose,o=e.submit,l=e.setRemove,u=e.z,c=e.isOwner,d=e.btnTxt,m=e.height;return n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{zIndex:u},className:i().overlay}),(0,r.jsxs)("div",{style:{zIndex:u,height:m},className:i().modal,children:[t,(0,r.jsxs)("div",{className:i()["footer-btn"],children:[l&&c&&(0,r.jsx)(a.Z,{bg:"#CC3636",onClick:function(){return l(!0)},placeholder:"Delete"}),(0,r.jsxs)("div",{className:i()["flex-end"],children:[(0,r.jsx)(a.Z,{bg:"gray",onClick:s,placeholder:"Exit"}),c&&(0,r.jsx)(a.Z,{onClick:o,placeholder:d||"submit"})]})]})]})]}):null}},2065:function(e,n,t){"use strict";var r=t(5893),a=t(4136),s=t.n(a);n.Z=function(){return(0,r.jsxs)("div",{className:s().spinner,children:["Loading",(0,r.jsx)("div",{className:s().primary}),(0,r.jsx)("div",{className:s().secondary})]})}},5467:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var r=t(5893),a=t(5014),s=t(9473),i=t(8957),o=t.n(i);function l(e){var n=e.rows,t=e.isLoading,i=e.rowCountState,l=e.page,u=e.pageSize,c=e.setPage,d=e.setPageSize,m=e.setSelectedRow,h=e.columns,f=(0,s.I0)();return(0,r.jsx)("div",{className:o().table,children:(0,r.jsx)(a._,{autoHeight:!0,rows:n,rowCount:i,loading:t,rowsPerPageOptions:[10,5],pagination:!0,page:l,pageSize:u,paginationMode:"server",onPageChange:function(e){f(c(e))},onSelectionModelChange:function(e){m(e[0])},onPageSizeChange:function(e){f(d(e))},columns:h})})}},2057:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return S}});var r=t(5893),a=t(7568),s=t(4924),i=t(6042),o=t(9396),l=t(655),u=t(1163),c=t(7294),d=t(9473),m=t(5678),h=t(8858),f=t(2089),p=t(4364),x=t(6430),g=t.n(x),_=t(9725),v=t(9501),j=t(2065),N=t(5467),w=t(8895),b=t.n(w);var y=function(e){var n=e.userInfo,t=e.idUser,a=e.remove;if(t&&!a){var s=(0,d.v9)((function(e){return e.users})),i=s.users,o=s.isLoading,l=i.find((function(e){return e.id==t})),u=l.fullName,c=l.email,m=l.role;return o?(0,r.jsx)(j.Z,{}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h1",{children:"User"}),(0,r.jsx)("hr",{className:b().hr}),(0,r.jsxs)("div",{className:b()["form-control"],children:[(0,r.jsx)("label",{children:"Fullname"}),(0,r.jsx)("input",{className:b().input,type:"text",onChange:n,placeholder:"Full Name",name:"fullName",defaultValue:u})]}),(0,r.jsxs)("div",{className:b()["form-control"],children:[(0,r.jsx)("label",{children:"Email"}),(0,r.jsx)("input",{onChange:n,className:b().input,name:"email",type:"email",placeholder:"Email",defaultValue:c})]}),(0,r.jsxs)("div",{className:b()["form-control"],children:[(0,r.jsx)("label",{children:"Password"}),(0,r.jsx)("input",{onChange:n,className:b().input,name:"password",type:"password",placeholder:"Password"})]}),(0,r.jsxs)("div",{className:b()["form-control"],children:[(0,r.jsx)("label",{children:"Role"}),(0,r.jsxs)("select",{name:"role",className:b().input,onChange:n,defaultValue:m,children:[(0,r.jsx)("option",{value:"User",children:"User"}),(0,r.jsx)("option",{value:"Admin",children:"Admin"})]})]})]})}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h1",{children:"Create a User"}),(0,r.jsx)("hr",{className:b().hr}),(0,r.jsxs)("div",{className:b()["form-control"],children:[(0,r.jsx)("label",{children:"Fullname"}),(0,r.jsx)("input",{className:b().input,type:"text",onChange:n,placeholder:"Full Name",name:"fullName"})]}),(0,r.jsxs)("div",{className:b()["form-control"],children:[(0,r.jsx)("label",{children:"Email"}),(0,r.jsx)("input",{onChange:n,className:b().input,name:"email",type:"email",placeholder:"Email"})]}),(0,r.jsxs)("div",{className:b()["form-control"],children:[(0,r.jsx)("label",{children:"Password"}),(0,r.jsx)("input",{onChange:n,className:b().input,name:"password",type:"password",placeholder:"Password"})]}),(0,r.jsxs)("div",{className:b()["form-control"],children:[(0,r.jsx)("label",{children:"Role"}),(0,r.jsxs)("select",{name:"role",className:b().input,onChange:n,children:[(0,r.jsx)("option",{value:"User",children:"User"}),(0,r.jsx)("option",{value:"Admin",children:"Admin"})]})]})]})},C=!0;var Z=function(){var e=(0,u.useRouter)(),n=(0,d.I0)(),t=(0,c.useState)(null),x=t[0],w=t[1],b=(0,c.useState)(!1),Z=b[0],S=b[1],A=(0,c.useState)(!1),k=A[0],U=A[1],E=(0,c.useState)({}),I=E[0],P=E[1],F=(0,d.v9)((function(e){return e.users})),z=F.users,R=F.isLoading,O=F.total,D=F.page,L=F.pageSize,M=(0,d.v9)((function(e){return e.auth})).user;(0,c.useEffect)((function(){return M&&"User"===M.role&&e.replace("/"),"object"!=typeof localStorage.getItem("user")&&localStorage.getItem("user")||e.replace("/login"),localStorage.getItem("user")&&!M&&n((0,h.II)(JSON.parse(localStorage.getItem("user")))),C=!1,function(){n((0,f.mc)())}}),[n,M,e]),(0,c.useEffect)((function(){M&&"Admin"===M.role&&n((0,f.Rf)({page:D,limit:L})).unwrap().then((function(e){m.Am.success(e.message)})).catch((function(e){m.Am.error(e.message)}))}),[n,M,D,L]);var T=function(){var e=(0,a.Z)((function(){return(0,l.__generator)(this,(function(e){return n((0,f.r4)(I)).unwrap().then((function(e){m.Am.success(e.message),n((0,f.Rf)({page:D,limit:L})),S(!1),P({})})).catch((function(e){m.Am.error(e)})),[2]}))}));return function(){return e.apply(this,arguments)}}(),J=function(){var e=(0,a.Z)((function(){var e,t;return(0,l.__generator)(this,(function(r){return e={},t={},n((0,f.Nq)((0,o.Z)((0,i.Z)(e,I),(t.id=x,t)))).unwrap().then((function(e){m.Am.success("User was updated successfully"),n((0,f.Rf)({page:D,limit:L})),P({}),w(null)})).catch((function(e){m.Am.error(e)})),[2]}))}));return function(){return e.apply(this,arguments)}}(),X=function(){var e=(0,a.Z)((function(){return(0,l.__generator)(this,(function(e){return n((0,f.h8)(x)).unwrap().then((function(e){m.Am.success("User was deleted successfully"),w((function(e){return null})),U((function(e){return!e})),n((0,f.Rf)({page:D,limit:L})),P({})})).catch((function(e){m.Am.error(e)})),[2]}))}));return function(){return e.apply(this,arguments)}}(),q=function(e){P((function(n){return(0,o.Z)((0,i.Z)({},n),(0,s.Z)({},e.target.name,e.target.value))}))};return R||C?(0,r.jsx)(j.Z,{}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:g().right,children:[(0,r.jsx)("h3",{children:"Users"}),(0,r.jsx)("div",{className:g().end,children:(0,r.jsx)(_.Z,{color:"white",onClick:function(){return S(!0)},placeholder:"Create User"})})]}),(0,r.jsx)(N.Z,{rows:z,isLoading:R,rowCountState:O,page:D,pageSize:L,setPage:f.YA,setPageSize:f.U5,setSelectedRow:w,columns:p.Sf}),(0,r.jsx)(v.Z,{height:"65%",open:x,onClose:function(){return w(null)},submit:J,setRemove:U,isOwner:!0,children:(0,r.jsx)(y,{idUser:x,userInfo:q,remove:k})}),(0,r.jsx)(v.Z,{height:"65%",submit:T,open:Z,onClose:function(){return S(!1)},isOwner:!0,children:(0,r.jsx)(y,{userInfo:q})}),(0,r.jsx)(v.Z,{height:"18%",open:k,onClose:function(){return U(!1)},z:200,submit:X,isOwner:!0,children:(0,r.jsx)("h4",{children:"You sure about removing that record!"})})]})};var S=function(){return(0,r.jsx)(Z,{})}},4364:function(e,n,t){"use strict";t.d(n,{R4:function(){return a},Sf:function(){return s},iL:function(){return i}});var r=t(5089),a=[{field:"id",headerName:"ID",width:20},{field:"title",headerName:"Title",width:130},{field:"description",headerName:"Description",width:220},{field:"User",headerName:"Creator",width:80},{field:"urgent",headerName:"Urgent",width:70,valueFormatter:function(e){return e.value?"YES":"NO"}},{field:"status",headerName:"Status",width:120},{field:"category",headerName:"Category",width:120},{field:"solution",headerName:"Solution",width:220},{field:"createdAt",headerName:"Created At",type:"date",width:130,valueFormatter:function(e){return(0,r.Z)(new Date(e.value))}},{field:"updatedAt",headerName:"Updated At",type:"date",width:130,valueFormatter:function(e){return(0,r.Z)(new Date(e.value))}}],s=[{field:"id",headerName:"ID",width:100},{field:"fullName",headerName:"Full Name",width:130},{field:"email",headerName:"Email",width:230},{field:"role",headerName:"Role",width:100},{field:"createdAt",headerName:"Created At",type:"date",width:180,valueFormatter:function(e){return(0,r.Z)(new Date(e.value))}},{field:"updatedAt",headerName:"Updated At",type:"date",width:180,valueFormatter:function(e){return(0,r.Z)(new Date(e.value))}}],i=["January","February","March","April","May","June","July","August","September","October","November","December"]},8895:function(e){e.exports={field:"ticket-form_field__dsiPZ",hr:"ticket-form_hr__0rXjM","form-control":"ticket-form_form-control__Td6_C",input:"ticket-form_input__J2v0t"}},6430:function(e){e.exports={right:"ticket_right__ejEmN",end:"ticket_end__OmN4x"}},2892:function(e){e.exports={btn:"button_btn__4KBe5",reverse:"button_reverse__Px7uH"}},6591:function(e){e.exports={modal:"modal_modal__kZrya",overlay:"modal_overlay__ayacu","footer-btn":"modal_footer-btn__rT9ML","flex-end":"modal_flex-end__fq18W"}},4136:function(e){e.exports={spinner:"spinner_spinner__fEcEZ","text-color":"spinner_text-color__4zX9q",rotate:"spinner_rotate__qewNB",primary:"spinner_primary__LI3fL",secondary:"spinner_secondary__XvO1n"}},8957:function(e){e.exports={table:"table_table__MzAii"}}},function(e){e.O(0,[89,331,774,888,179],(function(){return n=3007,e(e.s=n);var n}));var n=e.O();_N_E=n}]);